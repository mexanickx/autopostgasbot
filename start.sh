#!/bin/bash

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ .env —Ñ–∞–π–ª–∞
if [ ! -f ".env" ]; then
  echo "‚ùå –û—à–∏–±–∫–∞: —Ñ–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω!"
  echo "–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π TELEGRAM_BOT_TOKEN"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Python
if ! command -v python3 &> /dev/null; then
  echo "‚ùå –û—à–∏–±–∫–∞: Python3 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
if [ ! -f "requirements.txt" ]; then
  echo "‚ùå –û—à–∏–±–∫–∞: —Ñ–∞–π–ª requirements.txt –Ω–µ –Ω–∞–π–¥–µ–Ω!"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
if [ ! -f "main.py" ]; then
  echo "‚ùå –û—à–∏–±–∫–∞: –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª main.py –Ω–µ –Ω–∞–π–¥–µ–Ω!"
  exit 1
fi

echo "üêç –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
python3 -m pip install -r requirements.txt

echo "ü§ñ –ó–∞–ø—É—Å–∫–∞–µ–º Telegram –±–æ—Ç–∞..."
python3 main.py
